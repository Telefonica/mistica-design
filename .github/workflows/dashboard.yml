name: Dashboard

on:
  push:
    branches:
      - system-dashboard

jobs:
  send-files:
    runs-on: [self-hosted, Linux]
    steps:
    # comando solo para Self-Hosted machines
    # - run: sudo chown -R $USER:$USER /home/pi/actions-github/mistica-design-libraries/_work/
    - name: 'Generate Dashboard'
      uses: ethomson/issue-dashboard@v1
      with:
        config: |
          title: 'Dashboard'
          output:
            format: html
            filename: 'dashboard.html'
          sections:
          - title: 'Pull Requests'
            widgets:
            - type: 'table'
              title: 'New Pull Requests (This Week)'
              issue_query: 'repo:libgit2/libgit2 is:open is:issue created:>{{ date("-7 days") }} sort:created-asc'
        token: ${{ github.token }}