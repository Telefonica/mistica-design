import { Inline, useScreenSize, Stack } from "@telefonica/mistica";
import styles from "./other-used-components.module.css";
import { formatCount } from "../utils";
import { Components } from "../data/figmaData";

const OtherUsedComponents = () => {
  const { restOfMostUsedComponents } = Components();
  const { isMobile } = useScreenSize();

  const svg = (
    <svg
      style={{ rotate: isMobile ? "90deg" : "0deg" }}
      xmlns="http://www.w3.org/2000/svg"
      width="100%"
      maxWidth={isMobile ? "inherit" : "396"}
      height={isMobile ? "auto" : "468"}
      viewBox="0 0 396 468"
      fill="none"
    >
      <path
        d="M153 350.527V369.287L128.22 369.707C128.22 368.587 128.22 367.327 128.22 366.627C128.64 361.587 151.74 355.567 151.74 350.807C151.74 344.087 145.3 343.107 127.24 343.107C109.6 343.107 104.56 344.647 104.56 350.807C104.56 358.647 104.56 365.787 104.7 372.087H113.24C140.12 372.507 153.14 391.127 153.14 406.667L129.2 406.527H102.46V392.387H55L55 372.087H102.46V350.947C102.46 348.567 102.74 346.187 103.16 343.807H55V323.507H103.72V341.147C106.52 331.347 114.22 323.367 130.88 323.367C151.88 323.367 153.56 335.967 153 350.527ZM112.26 392.387H106.38C107.92 400.647 110.58 405.127 115.2 405.127H129.2C129.06 395.467 121.5 392.387 112.26 392.387Z"
        fill="black"
      />
      <path
        d="M154.4 267.915C154.4 294.375 133.68 315.375 104 315.375C74.32 315.375 53.6 294.375 53.6 267.915C53.6 241.595 74.32 220.595 104 220.595C133.68 220.595 154.4 241.595 154.4 267.915ZM136.48 267.915C136.48 252.095 123.6 239.215 104 239.215C84.4 239.215 71.52 252.095 71.52 267.915C71.52 283.875 84.4 296.615 104 296.615C123.6 296.615 136.48 283.875 136.48 267.915Z"
        fill="black"
      />
      <path
        d="M153 170.872V189.632L72.92 189.632V218.472H55L55 142.032H72.92V170.872H153Z"
        fill="black"
      />
      <path d="M272 385.356V404.116H174V385.356H272Z" fill="black" />
      <path
        d="M272 350.317V369.077H174V344.577L241.48 309.297V306.497H174V287.877L272 287.877V312.377L204.52 347.517V350.317H272Z"
        fill="black"
      />
      <path d="M272 221.041V239.801H174V221.041H272Z" fill="black" />
      <path
        d="M272 164.303L272 183.063L191.92 183.063V211.903H174L174 135.463H191.92V164.303H272Z"
        fill="black"
      />
      <path
        d="M194.86 96.8451C188 101.465 176.24 103.845 166.02 99.2251L173.72 110.705C177.64 115.465 182.12 115.605 185.34 115.605C214.04 115.605 223.14 47.0051 252.12 47.0051C273.68 47.0051 286.14 85.6451 286.14 103.005C286.14 124.285 265.14 145.285 245.68 129.325L230 99.6451L231.12 98.6651C236.44 109.865 243.58 114.765 253.24 114.765C279.84 114.765 289.36 61.8451 263.18 61.8451C227.2 61.8451 233.36 129.325 194.72 129.325C182.12 129.325 170.78 107.765 164.76 98.6651C193.6 85.6451 195.42 65.2051 170.08 61.2851V60.3051L206.48 65.7651C206.48 77.2451 204.66 90.1251 194.86 96.8451Z"
        fill="black"
      />
      <path
        d="M392 385.689V404.449H294V385.689H333.2V342.289L294 342.289V323.669H392V342.289H352.1L352.1 385.689H392Z"
        fill="black"
      />
      <path
        d="M288.96 243.637L288.82 243.077C292.6 240.697 301.28 238.317 310.66 238.317C316.96 238.317 325.22 239.857 325.22 245.737C325.22 256.237 296.1 262.257 296.1 281.717C296.1 286.477 298.2 301.317 315.98 296.837C345.1 289.557 325.5 253.157 337.12 253.157C344.54 253.157 339.64 267.437 339.5 274.577C339.22 288.997 355.46 296.557 368.48 288.297C392.42 273.037 394.52 246.297 380.38 239.857C364.42 232.577 360.64 263.657 368.06 265.757C370.3 266.317 371.56 266.177 374.64 263.517L375.06 264.217C367.5 271.637 353.92 279.057 349.02 275.137C336.98 265.617 356.16 229.217 380.66 238.177C404.6 246.997 400.96 317.277 363.86 317.277C334.32 317.277 337.12 274.157 337.12 266.177H336.28C336 273.457 334.32 315.737 308.56 315.737C301.42 315.737 287.7 312.517 287.7 296.977C287.56 277.377 305.34 266.457 305.34 252.597C305.34 246.157 296.24 240.137 288.96 243.637Z"
        fill="black"
      />
      <path
        d="M392 161.111V226.911H294V161.111H311.08V208.151H334.6V163.911H351.12V208.151H374.92V161.111H392Z"
        fill="black"
      />
      <path
        d="M392 83.4495V147.85H294V129.09H374.08V83.4495H392Z"
        fill="black"
      />
      <path
        d="M393.4 43.6512C393.4 68.7112 378.98 83.1312 361.06 83.1312V64.5112C369.74 64.5112 376.88 57.2312 376.88 43.6512C376.88 29.9312 371 24.3312 364 24.3312C357.98 24.3312 353.64 28.5312 351.68 39.3112L348.6 55.8312C345.52 72.6312 336.98 81.0312 322 81.0312C305.48 81.0313 292.6 68.0112 292.6 45.0512C292.6 20.4112 306.32 6.41125 325.08 6.41125V25.0312C316.54 25.0312 309.12 32.4512 309.12 45.0512C309.12 56.5312 315 62.4112 322 62.4112C327.88 62.4112 331.38 58.7712 333.2 49.1112L336 33.7112C339.5 14.1112 347.9 5.71125 364 5.71125C380.52 5.71124 393.4 18.7312 393.4 43.6512Z"
        fill="black"
      />
      <path
        d="M0 115C0 110.576 1.56027 106.803 4.68082 103.681C7.80138 100.56 11.5745 99 16 99C20.4243 99 24.1973 100.56 27.3192 103.681C30.4397 106.801 32 110.574 32 115C32 119.426 30.4397 123.199 27.3192 126.319C24.1986 129.44 20.4256 131 16 131C11.5745 131 7.80138 129.44 4.68082 126.319C1.56027 123.199 0 119.426 0 115ZM3.2 115C3.2 118.526 4.45029 121.537 6.95091 124.033C9.45152 126.53 12.4679 127.778 16 127.778C19.5308 127.778 22.5472 126.53 25.0491 124.033C27.5497 121.537 28.8 118.526 28.8 115C28.8 111.474 27.5497 108.463 25.0491 105.967C22.5485 103.47 19.5321 102.222 16 102.222C12.4679 102.222 9.45152 103.47 6.95091 105.967C4.45029 108.463 3.2 111.474 3.2 115ZM6.4 115C6.4 112.353 7.33642 110.095 9.21057 108.226C11.0834 106.356 13.347 105.422 16 105.422C18.6517 105.422 20.9153 106.357 22.7894 108.226C24.6623 110.096 25.6 112.353 25.6 115C25.6 117.646 24.6623 119.905 22.7894 121.774C20.9153 123.644 18.6517 124.578 16 124.578C13.347 124.578 11.0847 123.643 9.21057 121.774C7.33642 119.905 6.4 117.646 6.4 115ZM9.60001 115C9.60001 116.761 10.2238 118.261 11.4702 119.5C12.7166 120.738 14.2274 121.357 16 121.357C17.7726 121.357 19.2834 120.738 20.5298 119.5C21.7762 118.261 22.4 116.761 22.4 115C22.4 113.239 21.7762 111.74 20.5298 110.5C19.2821 109.262 17.7726 108.643 16 108.643C14.2274 108.643 12.7166 109.263 11.4702 110.5C10.2225 111.74 9.60001 113.239 9.60001 115ZM12.8 115C12.8 114.133 13.1139 113.39 13.7403 112.772C14.3668 112.153 15.1209 111.844 16 111.844C16.8791 111.844 17.6319 112.154 18.2597 112.772C18.8861 113.39 19.2 114.133 19.2 115C19.2 115.867 18.8861 116.61 18.2597 117.228C17.6332 117.847 16.8791 118.156 16 118.156C15.1209 118.156 14.3681 117.847 13.7403 117.228C13.1126 116.61 12.8 115.867 12.8 115Z"
        fill="#E3B315"
      />
      <path
        d="M65 76.5L72.5092 69L80 76.5L72.5092 84L65 76.5Z"
        fill="#E3B315"
      />
      <path
        d="M223 453.045C227.814 452.893 231.853 451.848 235.117 449.906C239.192 447.486 241.384 444.185 241.69 440H244.364C244.742 444.235 246.93 447.537 250.927 449.906C254.15 451.834 258.175 452.881 263 453.045V454.917C258.175 455.081 254.142 456.128 250.899 458.06C246.83 460.496 244.642 463.809 244.336 468H241.662C241.446 464.63 239.942 461.803 237.152 459.518C233.677 456.653 228.959 455.119 223 454.918V453.045ZM255.681 453.99C249.559 452.364 245.337 449.409 243.014 445.123C240.832 449.396 236.604 452.352 230.331 453.99C233.306 454.735 235.888 455.877 238.08 457.416C240.269 458.956 241.916 460.773 243.015 462.869C244.114 460.761 245.762 458.938 247.958 457.398C250.153 455.857 252.726 454.721 255.681 453.99Z"
        fill="#E3B315"
      />
      <path
        d="M152 13L161.75 9.75026L165 0L168.25 9.75026L178 13L168.25 16.2497L165 26L161.75 16.2497L152 13Z"
        fill="#E3B315"
      />
      <path
        d="M31.4693 406.047H46.5307L46.5123 421.09L31.4693 421.109V406.047Z"
        fill="#E3B315"
      />
    </svg>
  );

  return (
    <div className={styles.container}>
      {isMobile ? (
        <Stack space={0}>
          {svg}
          <ul>
            {restOfMostUsedComponents
              .sort((a, b) => b.count - a.count)
              .map((component) => (
                <li key={component.name}>
                  {component.name} {formatCount(component.count)} instances,{" "}
                  {component.percentageChange}
                </li>
              ))}
          </ul>
        </Stack>
      ) : (
        <Inline>
          {svg}
          <ul>
            {restOfMostUsedComponents
              .sort((a, b) => b.count - a.count)
              .map((component) => (
                <li key={component.name}>
                  {component.name} {formatCount(component.count)} instances,{" "}
                  {component.percentageChange}
                </li>
              ))}
          </ul>
        </Inline>
      )}
    </div>
  );
};

export default OtherUsedComponents;
